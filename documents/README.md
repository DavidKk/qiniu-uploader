[![GitHub version](https://badge.fury.io/gh/DavidKk%2Fqiniu-uploader.svg)](https://badge.fury.io/gh/DavidKk%2Fqiniu-uploader)
[![npm version](https://badge.fury.io/js/qiniup.svg)](https://badge.fury.io/js/qiniup)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com)

[![Build Status](https://travis-ci.org/DavidKk/qiniu-uploader.svg?branch=master)](https://travis-ci.org/DavidKk/qiniu-uploader)
[![codecov](https://codecov.io/gh/DavidKk/qiniu-uploader/branch/master/graph/badge.svg)](https://codecov.io/gh/DavidKk/qiniu-uploader)
[![Document](https://doc.esdoc.org/github.com/DavidKk/qiniu-uploader/badge.svg?t=0)](https://doc.esdoc.org/github.com/DavidKk/qiniu-uploader)
[![Dependency Status](https://dependencyci.com/github/DavidKk/qiniu-uploader/badge)](https://dependencyci.com/github/DavidKk/qiniu-uploader)

[![Build Status](https://saucelabs.com/browser-matrix/DavidKk.svg)](https://saucelabs.com/beta/builds/72e6def51c8c4388af6212cbc2171461)


# 七牛上传控件


## 事例

- [Qiniu Clound Mock](https://davidkk.github.io/qiniu-uploader/demo/)
- [Unit Test](https://github.com/DavidKk/qiniu-uploader/tree/master/unitest)


## 文档

- [使用文档](https://davidkk.github.io/qiniu-uploader/)
- [开发文档](https://davidkk.github.io/qiniu-uploader/esdoc/)


## 安装

```
yarn add qiniup
```


## 特点

- 支持分块分片上传
- 支持断点续传
- 支持 base64 文件上传


## 使用

```Javascript
import { Uploader } from 'qiniup'

// Docs: https://doc.esdoc.org/github.com/DavidKk/qiniu-uploader/class/src/uploader.js~Uploader.html#instance-constructor-constructor
let qiniup = new Uploader()

let params = { token: 'generated by sdk' }

// Docs: https://doc.esdoc.org/github.com/DavidKk/qiniu-uploader/class/src/uploader.js~Uploader.html#instance-method-upload
qiniup.upload(file, params, { resumingByFileSize: 4 * 1024 * 1024 /** 默认也为 4M, 如果大于4M则使用分块分片(同时支持断点续传)上传 */ }, function (error) {
  if (error) {
    console.log(error)
    return
  }

  // upload success, somthing todo...
})

```

## 动态获取 token

```Javascript
let qiniup = new Uploader({
  tokenGetter (callback) {
    // do some async or sync request logic to get token
    callback(null, token)

    // or
    // 同时也可以设置过期时间（在 0.2.0 版本以上才适用）
    callback(null, { token, expire })
  }
})
```

## 获取上传状态

```Javascript
let progress = (event) => {
  console.log('当前进度为', event.loaded)
  console.log('总进度为', event.total)
  console.log('进程百分比', event.loaded / event.total)

  console.log('上传事件类型', event.type)
  console.log('当前上传进程', event.process)
  console.log('所有已注册上传进程', event.processes)
}

// `resumingByFileSize = 0` 表示一定使用分段上传
qiniup.upload(file, params, { resumingByFileSize: 0, progress }, function () {
  // do something...
})
```
